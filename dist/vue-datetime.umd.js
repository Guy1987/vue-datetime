(function(y,e){typeof exports=="object"&&typeof module!="undefined"?e(exports,require("vue"),require("luxon"),require("weekstart")):typeof define=="function"&&define.amd?define(["exports","vue","luxon","weekstart"],e):(y=typeof globalThis!="undefined"?globalThis:y||self,e((y["vue-datetime"]=y["vue-datetime"]||{},y["vue-datetime"]["[name]"]={}),y.vue,y.luxon,y.weekstart))})(this,function(y,e,p,R){"use strict";var Ae=Object.defineProperty,Ye=Object.defineProperties;var Ze=Object.getOwnPropertyDescriptors;var G=Object.getOwnPropertySymbols;var Ge=Object.prototype.hasOwnProperty,Ue=Object.prototype.propertyIsEnumerable;var $=(y,e,p)=>e in y?Ae(y,e,{enumerable:!0,configurable:!0,writable:!0,value:p}):y[e]=p,U=(y,e)=>{for(var p in e||(e={}))Ge.call(e,p)&&$(y,p,e[p]);if(G)for(var p of G(e))Ue.call(e,p)&&$(y,p,e[p]);return y},x=(y,e)=>Ye(y,Ze(e));var V=(y,e,p)=>($(y,typeof e!="symbol"?e+"":e,p),p);function q(o){e.onMounted(()=>{document.addEventListener("keydown",o)}),e.onUnmounted(()=>{document.removeEventListener("keydown",o)})}function L(o){const a=p.DateTime.fromISO(o);return a.isValid?a:void 0}function j(o,a){return!o||!a||o<=a}function v(o,a,t){const r=o==null?void 0:o.year,c=a==null?void 0:a.year;return!j(o,a)||!!r&&t<r||!!c&&t>c}function F(o,a,t,r){const c=o==null?void 0:o.month,d=a==null?void 0:a.month;return v(o,a,t)||!!c&&o.year===t&&r<o.month||!!d&&a.year===t&&r>a.month}function W(o,a,t,r,c){const d=o==null?void 0:o.day,m=a==null?void 0:a.day;return F(o,a,t,r)||!!d&&o.month===r&&o.year===t&&c<o.day||!!m&&a.month===r&&a.year===t&&c>a.day}function P(o,a,t){return o!==null&&t<o||a!==null&&t>a}function K(o,a,t){const r=p.DateTime.local(o,a,1);if(!r.isValid)return[];const d=7*(6-1),m=(7-r.weekday+t)%7,l=(7-m)%7,f=r.daysInMonth,u=d-(f-m-(m?0:7)),h=r.minus({month:1}).daysInMonth,_=r.minus({month:1}),B=r.plus({month:1});return[...Array(f+l+u)].map((b,k)=>k+1<=l?{year:_.year,month:_.month,day:h+(k+1-l)}:k>=l+f?{year:B.year,month:B.month,day:k+1-(l+f)}:{year:o,month:a,day:k+1-l})}function J(){return R.getWeekStartByLocale(p.Settings.defaultLocale)||7}function z(o){return o.charAt(0).toUpperCase()+o.slice(1)}function M(o){return String(o).padStart(2,"0")}function Q(o){const a=o-1;let t=p.Info.weekdays("short").map(r=>z(r));return t=t.concat(t.splice(0,a)),t}function O(){return[...p.Info.months().map(o=>z(o))]}function X(o){return[...Array(Math.ceil(24/o))].map((a,t)=>t*o)}function ee(o){return[...Array(Math.ceil(60/o))].map((a,t)=>t*o)}function te(o){return[...Array(201)].map((a,t)=>o-100+t)}const oe={class:"calendar"},ae={class:"navigation"},ne={class:"current--month"},se={class:"month"},ie=["onClick"],le=e.defineComponent({__name:"DatetimeCalendar",props:{year:{},month:{},day:{default:void 0},disabled:{default:()=>[]},minDate:{default:void 0},maxDate:{default:void 0},weekStart:{default:1}},emits:["change"],setup(o,{emit:a}){const t=o,r=a,c=e.ref(p.DateTime.fromObject({year:t.year.valueOf(),month:t.month.valueOf()},{zone:"UTC"})),d=Q(t.weekStart),m=O(),l=e.computed(()=>c.value.year),f=e.computed(()=>c.value.month),u=e.computed(()=>m[f.value-1]),h=e.computed(()=>K(l.value,f.value,t.weekStart).map((k,w)=>({key:w,number:k.day,selected:t.year===k.year&&t.month===k.month&&t.day===k.day,disabled:k.month!==f.value||t.disabled.includes(k.day)||W(t.minDate,t.maxDate,l.value,f.value,k.day)}))),_=k=>{k.disabled||r("change",{year:l.value,month:f.value,day:k.number})},B=()=>{c.value=c.value.minus({month:1})},b=()=>{c.value=c.value.plus({month:1})};return(k,w)=>(e.openBlock(),e.createElementBlock("div",oe,[e.createElementVNode("div",ae,[e.createElementVNode("div",{class:"navigation--previous",onClick:B},w[0]||(w[0]=[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 61.3 102.8"},[e.createElementVNode("path",{fill:"none",stroke:"#444","stroke-width":"14","stroke-miterlimit":"10",d:"M56.3 97.8L9.9 51.4 56.3 5"})],-1)])),e.createElementVNode("div",ne,e.toDisplayString(u.value)+" "+e.toDisplayString(l.value),1),e.createElementVNode("div",{class:"navigation--next",onClick:b},w[1]||(w[1]=[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 61.3 102.8"},[e.createElementVNode("path",{fill:"none",stroke:"#444","stroke-width":"14","stroke-miterlimit":"10",d:"M56.3 97.8L9.9 51.4 56.3 5"})],-1)]))]),e.createElementVNode("div",se,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(d),s=>(e.openBlock(),e.createElementBlock("div",{key:s,class:"month__weekday"},e.toDisplayString(s),1))),128)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(h.value,s=>(e.openBlock(),e.createElementBlock("div",{key:s.key,class:e.normalizeClass(["month__day",{selected:s.selected,disabled:s.disabled}]),onClick:S=>_(s)},[e.createElementVNode("span",null,[e.createElementVNode("span",null,e.toDisplayString(s.number),1)])],10,ie))),128))])]))}}),xe="",D=(o,a)=>{const t=o.__vccOpts||o;for(const[r,c]of a)t[r]=c;return t},re=D(le,[["__scopeId","data-v-ba01ba0a"]]);function T(o,a){const t=()=>{var r,c,d;if(o.value){const m=(r=o.value)==null?void 0:r.querySelector(a);(d=(c=o.value).scrollTo)==null||d.call(c,{top:m?m.offsetTop-152:0,behavior:"auto"})}};return e.onMounted(t),e.onUpdated(t),t}const ce={class:"container"},de=["onClick"],me=e.defineComponent({__name:"DatetimeMonthPicker",props:{year:{},month:{},minDate:{},maxDate:{}},emits:["change"],setup(o,{emit:a}){const t=o,r=e.computed(()=>O().map((l,f)=>({key:f,number:++f,label:l,selected:f===t.month,disabled:!(f+1)||F(t.minDate,t.maxDate,t.year,f)}))),c=e.ref(null);T(c,".selected");const d=a,m=l=>{l.disabled||d("change",l.number,10)};return(l,f)=>(e.openBlock(),e.createElementBlock("div",ce,[e.createElementVNode("div",{ref_key:"monthList",ref:c,class:"list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.value,u=>(e.openBlock(),e.createElementBlock("div",{key:u.key,class:e.normalizeClass(["item",{selected:u.selected,disabled:u.disabled}]),onClick:h=>m(u)},e.toDisplayString(u.label),11,de))),128))],512)]))}}),Re="",ue=D(me,[["__scopeId","data-v-a3788545"]]),pe=["onClick"],fe=["onClick"],ye={key:0,ref:"suffixList",class:"list list--suffix"},ke=e.defineComponent({__name:"DatetimeTimePicker",props:{hour:{},minute:{},use12Hour:{type:Boolean,default:!1},hourStep:{default:1},minuteStep:{default:1},minTime:{default:void 0},maxTime:{default:void 0}},emits:["change"],setup(o,{emit:a}){const t=o,r=e.computed(()=>t.minTime?parseInt(t.minTime.split(":")[0],10):null),c=e.computed(()=>t.maxTime?parseInt(t.maxTime.split(":")[0],10):null),d=e.computed(()=>X(t.hourStep).filter(s=>t.use12Hour?t.hour<12?s<12:s>=12:!0).map(s=>({key:s,number:s,label:M(s),selected:s===t.hour,disabled:P(r.value,c.value,s)}))),m=e.computed(()=>t.minTime&&r.value===t.hour?parseInt(t.minTime.split(":")[1],10):null),l=e.computed(()=>t.maxTime&&c.value===t.hour?parseInt(t.maxTime.split(":")[1],10):null),f=e.computed(()=>ee(t.minuteStep).map(s=>({key:s,number:s,label:M(s),selected:s===t.minute,disabled:P(m.value,l.value,s)}))),u=e.ref(null),h=e.ref(null);T(u,".selected"),T(h,".selected");const _=a,B=s=>{s.disabled||_("change",{hour:s.number})},b=s=>{s.disabled||_("change",{minute:s.number})},k=s=>{s==="am"&&t.hour>=12&&_("change",{hour:t.hour-12,suffixTouched:!0}),s==="pm"&&t.hour<12&&_("change",{hour:t.hour+12,suffixTouched:!0})},w=s=>t.use12Hour?s%12?s%12:12:s;return(s,S)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["container",{"with-suffix":s.use12Hour}])},[e.createElementVNode("div",{ref_key:"hourList",ref:u,class:"list list--hour"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(d.value,n=>(e.openBlock(),e.createElementBlock("div",{key:n.key,class:e.normalizeClass(["item",{selected:n.selected,disabled:n.disabled}]),onClick:C=>B(n)},e.toDisplayString(e.unref(M)(w(n.number))),11,pe))),128))],512),e.createElementVNode("div",{ref_key:"minuteList",ref:h,class:"list list--minute"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(f.value,n=>(e.openBlock(),e.createElementBlock("div",{key:n.key,class:e.normalizeClass(["item",{selected:n.selected,disabled:n.disabled}]),onClick:C=>b(n)},e.toDisplayString(n.label),11,fe))),128))],512),s.use12Hour?(e.openBlock(),e.createElementBlock("div",ye,[e.createElementVNode("div",{class:e.normalizeClass(["item",{selected:s.hour<12}]),onClick:S[0]||(S[0]=n=>k("am"))}," am ",2),e.createElementVNode("div",{class:e.normalizeClass(["item",{selected:s.hour>=12}]),onClick:S[1]||(S[1]=n=>k("pm"))}," pm ",2)],512)):e.createCommentVNode("",!0)],2))}}),qe="",he=D(ke,[["__scopeId","data-v-7f6bd741"]]),_e={class:"container"},we=["onClick"],Be=e.defineComponent({__name:"DatetimeYearPicker",props:{year:{},minDate:{},maxDate:{}},emits:["change"],setup(o,{emit:a}){const t=o,r=e.computed(()=>te(t.year).map(l=>({key:l,number:l,selected:l===t.year,disabled:!l||v(t.minDate,t.maxDate,l)}))),c=e.ref(null);T(c,".selected");const d=a,m=l=>{l.disabled||d("change",l.number,10)};return(l,f)=>(e.openBlock(),e.createElementBlock("div",_e,[e.createElementVNode("div",{ref_key:"yearList",ref:c,class:"list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.value,u=>(e.openBlock(),e.createElementBlock("div",{key:u.key,class:e.normalizeClass(["item",{selected:u.selected,disabled:u.disabled}]),onClick:h=>m(u)},e.toDisplayString(u.number),11,we))),128))],512)]))}}),je="",Ce=D(Be,[["__scopeId","data-v-7f78f1c1"]]),be=["time"],Se=["date"],De=["date","time"],H="end";class N{constructor(a=[]){V(this,"flow");V(this,"endStatus",H);V(this,"diversionNext");this.flow=a,this.diversionNext=null}step(a){return a>=0&&this.flow.length>a?this.flow[a]:this.endStatus}first(){return this.step(0)}next(a){if(this.diversionNext){const t=this.diversionNext;return this.diversionNext=null,t}return this.step(this.flow.indexOf(a)+1)}diversion(a){this.diversionNext=a}}const Te=o=>new N(o),Ne=o=>{switch(o){case"datetime":return new N(De);case"date":return new N(Se);case"time":return new N(be);default:throw new TypeError(`Cannot create flow type of ${o}`)}},ge={class:"popup"},Ve={class:"header"},Me={key:0,class:"title"},Ie={class:"popup__body"},$e={class:"actions"},Le=e.defineComponent({__name:"DatetimePopup",props:{datetime:{},phrases:{default:()=>({cancel:"Cancel",ok:"Ok"})},type:{default:"date"},use12Hour:{type:Boolean,default:!1},hourStep:{default:1},minuteStep:{default:1},minDatetime:{default:void 0},maxDatetime:{default:void 0},auto:{type:Boolean,default:!1},weekStart:{default:1},flow:{default:void 0},title:{default:""}},emits:["cancel","confirm"],setup(o,{emit:a}){var Z;const t=o,r=a,c=t.flow?Te(t.flow):Ne(t.type),d=e.ref((Z=t.datetime)!=null?Z:p.DateTime.now()),m=e.ref(c.first());let l={};const f=()=>{m.value=c.next(m.value),l={},m.value===H&&r("confirm",d.value)};q(i=>{switch(i.key){case"Escape":case"Tab":r("cancel");break;case"Enter":f();break}});const u=e.computed(()=>d.value.year),h=e.computed(()=>d.value.month),_=e.computed(()=>d.value.day),B=e.computed(()=>d.value.hour),b=e.computed(()=>d.value.minute),k=e.computed(()=>d.value.toLocaleString({month:"long",day:"numeric"})),w=e.computed(()=>t.minDatetime&&t.minDatetime.year===u.value&&t.minDatetime.month===h.value&&t.minDatetime.day===_.value?t.minDatetime.toFormat("HH:mm"):void 0),s=e.computed(()=>t.maxDatetime&&t.maxDatetime.year===u.value&&t.maxDatetime.month===h.value&&t.maxDatetime.day===_.value?t.maxDatetime.toFormat("HH:mm"):void 0),S=()=>{m.value="year",c.diversion("date")},n=()=>{m.value="month",c.diversion("date")},C=i=>{d.value=d.value.set({year:i}),t.auto&&f()},ze=i=>{d.value=d.value.set({month:i}),t.auto&&f()},Oe=i=>{d.value=d.value.set({year:i==null?void 0:i.year,month:i==null?void 0:i.month,day:i==null?void 0:i.day}),t.auto&&f()},He=i=>{i.suffixTouched&&(l.suffix=!0),Number.isInteger(i.hour)&&(d.value=d.value.set({hour:i==null?void 0:i.hour}),l.hour=!0),Number.isInteger(i.minute)&&(d.value=d.value.set({minute:i==null?void 0:i.minute}),l.minutes=!0)};return(i,g)=>(e.openBlock(),e.createElementBlock("div",ge,[e.createElementVNode("div",Ve,[i.title?(e.openBlock(),e.createElementBlock("div",Me,e.toDisplayString(i.title),1)):e.createCommentVNode("",!0),i.type!=="time"?(e.openBlock(),e.createElementBlock("div",{key:1,class:"year",onClick:S},e.toDisplayString(u.value),1)):e.createCommentVNode("",!0),i.type!=="time"?(e.openBlock(),e.createElementBlock("div",{key:2,class:"month",onClick:n},e.toDisplayString(k.value),1)):e.createCommentVNode("",!0)]),e.createElementVNode("div",Ie,[m.value==="year"?(e.openBlock(),e.createBlock(Ce,{key:0,"min-date":i.minDatetime,"max-date":i.maxDatetime,year:u.value,onChange:C},null,8,["min-date","max-date","year"])):e.createCommentVNode("",!0),m.value==="month"?(e.openBlock(),e.createBlock(ue,{key:1,"min-date":i.minDatetime,"max-date":i.maxDatetime,year:u.value,month:h.value,onChange:ze},null,8,["min-date","max-date","year","month"])):e.createCommentVNode("",!0),m.value==="date"?(e.openBlock(),e.createBlock(re,{key:2,year:u.value,month:h.value,day:_.value,"min-date":i.minDatetime,"max-date":i.maxDatetime,"week-start":i.weekStart,onChange:Oe},null,8,["year","month","day","min-date","max-date","week-start"])):e.createCommentVNode("",!0),m.value==="time"?(e.openBlock(),e.createBlock(he,{key:3,hour:B.value,minute:b.value,"use12-hour":i.use12Hour,"hour-step":i.hourStep,"minute-step":i.minuteStep,"min-time":w.value,"max-time":s.value,onChange:He},null,8,["hour","minute","use12-hour","hour-step","minute-step","min-time","max-time"])):e.createCommentVNode("",!0)]),e.createElementVNode("div",$e,[e.createElementVNode("div",{class:"actions__button cancel",onClick:g[0]||(g[0]=Ee=>r("cancel"))},[e.renderSlot(i.$slots,"button-cancel__internal",{step:m.value},()=>[e.createTextVNode(e.toDisplayString(i.phrases.cancel),1)],!0)]),e.createElementVNode("div",{class:"actions__button confirm",onClick:g[1]||(g[1]=Ee=>f())},[e.renderSlot(i.$slots,"button-confirm__internal",{step:m.value},()=>[e.createTextVNode(e.toDisplayString(i.phrases.ok),1)],!0)])])]))}}),We="",I=D(Le,[["__scopeId","data-v-faccd17c"]]),ve=["id","value"],Fe={inheritAttrs:!1},Pe=e.defineComponent(x(U({},Fe),{__name:"DateTime",props:{modelValue:{default:""},valueZone:{default:"UTC"},inputId:{default:void 0},inputClass:{default:""},inputStyle:{default:""},hiddenName:{default:""},zone:{default:"local"},format:{default:void 0},type:{default:"date"},color:{default:"#3f51b5"},phrases:{default:()=>({cancel:"Cancel",ok:"Ok"})},use12Hour:{type:Boolean,default:!1},hourStep:{default:1},minuteStep:{default:1},minDatetime:{default:void 0},maxDatetime:{default:void 0},auto:{type:Boolean,default:!1},weekStart:{default:J},flow:{default:void 0},title:{default:""},hideBackdrop:{type:Boolean,default:!1},backdropClick:{type:Boolean,default:!0},fixedDate:{type:Boolean,default:!1},fixedTime:{type:Boolean,default:!1}},emits:["input","close","update:modelValue"],setup(o,{emit:a}){const t=o,r=e.computed(()=>({"--primary-color":t.color})),c=a,d=e.computed(()=>{if(t.type==="datetime"){if(t.fixedDate)return"time";if(t.fixedTime)return"date"}return t.type}),m=e.ref(!1),l=e.computed({get(){return L(t.modelValue)},set(n){n&&c("update:modelValue",n.toISO())}}),f=e.computed(()=>{let n=t.format;if(!n)switch(t.type){case"date":n=p.DateTime.DATE_MED;break;case"time":n=p.DateTime.TIME_24_SIMPLE;break;case"datetime":n=p.DateTime.DATETIME_MED;break;default:return""}return typeof n=="string"?l.value?p.DateTime.fromISO(t.modelValue).setZone(t.zone).toFormat(n):"":l.value?l.value.setZone(t.zone).toLocaleString(n):""}),u=e.computed(()=>t.minDatetime?p.DateTime.fromISO(t.minDatetime).setZone(t.zone):void 0),h=e.computed(()=>t.maxDatetime?p.DateTime.fromISO(t.maxDatetime).setZone(t.zone):void 0),_=()=>{let n=p.DateTime.utc().setZone(t.zone).set({second:0,millisecond:0});if(u.value&&n<u.value&&(n=u.value.set({second:0,millisecond:0})),h.value&&n>h.value&&(n=h.value.set({second:0,millisecond:0})),t.minuteStep===1)return n;const C=Math.round(n.minute/t.minuteStep)*t.minuteStep;return C===60?n.plus({hours:1}).set({minute:0}):n.set({minute:C})},B=e.computed(()=>l.value?l.value.setZone(t.zone):_()),b=()=>{var C;let n=l.value;n&&t.type==="date"&&(n=n.startOf("day")),c("input",(C=n==null?void 0:n.toISO())!=null?C:"")};e.onMounted(()=>{b()});const k=n=>{n.target.blur(),m.value=!0},w=()=>{m.value=!1,c("close")},s=n=>{l.value=n.toUTC(),b(),w()},S=()=>{t.backdropClick&&w()};return e.watch(()=>t.modelValue,n=>{l.value=L(n)}),(n,C)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["vdatetime",n.$attrs.class]),style:e.normalizeStyle(r.value)},[e.renderSlot(n.$slots,"before",{},void 0,!0),e.createElementVNode("input",e.mergeProps({id:n.inputId,class:["vdatetime-input",n.inputClass],style:n.inputStyle,type:"text",value:f.value},n.$attrs,{onClick:k,onFocus:k}),null,16,ve),e.renderSlot(n.$slots,"after",{},void 0,!0),e.createVNode(e.TransitionGroup,{name:"vdatetime-fade",tag:"div"},{default:e.withCtx(()=>[m.value&&!n.hideBackdrop?(e.openBlock(),e.createElementBlock("div",{key:"overlay",class:"vdatetime-overlay",onClick:e.withModifiers(S,["self"])})):e.createCommentVNode("",!0),m.value?(e.openBlock(),e.createBlock(I,{key:"popup",type:d.value,datetime:B.value,phrases:n.phrases,"use12-hour":n.use12Hour,"hour-step":n.hourStep,"minute-step":n.minuteStep,"min-datetime":u.value,"max-datetime":h.value,auto:n.auto,"week-start":n.weekStart,flow:n.flow,title:n.title,onConfirm:s,onCancel:w},null,8,["type","datetime","phrases","use12-hour","hour-step","minute-step","min-datetime","max-datetime","auto","week-start","flow","title"])):e.createCommentVNode("",!0)]),_:1})],6))}})),Ke="",E=D(Pe,[["__scopeId","data-v-f13c808b"]]);function A(){return{install:a=>{a.component("DateTime",E),a.component("DateTimePopup",I)}}}const Y="__VERSION__";A.version=Y,y.Datetime=E,y.DatetimePopup=I,y.default=A,y.version=Y,Object.defineProperties(y,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
